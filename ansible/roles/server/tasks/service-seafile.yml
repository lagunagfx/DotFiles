---
  # description: install, configure and enable the samba server

  - name: install Seafile's signing key
    become: yes
    ansible.builtin.shell:
      cmd: wget https://linux-clients.seafile.com/seafile.asc -O /usr/share/keyrings/seafile-keyring.asc

  # ToDo! : Make the script decide between lines for Debian 10 and Debian 11

  - name: add repo to the sources list
    become: yes
    ansible.builtin.shell:
      cmd: bash -c "echo 'deb [arch=amd64 signed-by=/usr/share/keyrings/seafile-keyring.asc] https://linux-clients.seafile.com/seafile-deb/buster/ stable main' > /etc/apt/sources.list.d/seafile.list"

  - name: check if the seaf-cli package is installed
    become: yes
    apt:
      name: seaf-cli
      state: present

  - name: restart the Samba service
    become: yes
    ansible.builtin.systemd:
        name: '{{ item }}'
        state: restarted
    loop:
      - smbd
      - nmbd

# end of tasks list
